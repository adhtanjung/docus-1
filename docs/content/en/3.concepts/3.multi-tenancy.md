---
title: Multi-Tenancy & Isolation
description: Understanding how HAER secures data across tenants and workspaces.
---

# Multi-Tenancy & Isolation

HAER is a multi-tenant platform designed to host multiple independent organizations on a single infrastructure while ensuring strict data isolation and security.

## The Hierarchy of Isolation

The system uses a two-tier isolation model:

### 1. Tenant (Organization Level)

A **Tenant** represents a top-level client or organization (e.g., "Company A").

- **Strict Isolation**: No data is ever shared between tenants at the database level.
- **Dedicated Configurations**: Each tenant has its own sets of custom fields, roles, permissions, and security policies.
- **Physical/Logical Separation**: While usually logically separated in a shared database via `tenant_id`, HAER is architected to support physical separation if required.

### 2. Workspace (Environment Level)

Within a single Tenant, data can be further subdivided into **Workspaces**.

- **Use Cases**: Different countries, business units, or even "Development" vs. "Production" environments within the same company.
- **Inheritance**: Workspaces inherit the Tenant's global configurations but can have their own specific records.
- **Member Access**: Users are assigned to specific workspaces. A user in "Workspace Alpha" cannot see records in "Workspace Beta" unless explicitly granted access to both.

## Security Controls

### The `tenant_id` Filter

Every single database query in the HAER backend is automatically scoped by the current user's `tenant_id`. It is impossible to query data without this filter in place.

### The `WorkspaceGuard`

For specialized modules, the `WorkspaceGuard` ensures that the `x-workspace-id` header in the API request matches the user's allowed workspaces.

## Data Residency

The multi-tenant architecture allows HAER to scale horizontally. Because data is tagged by `tenant_id`, the system can easily support sharding or moving specific tenants to different database clusters for performance or legal requirements (data residency laws).
